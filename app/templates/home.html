{% extends "menu.html" %}

{% block content %}
<main>
    <div class="content-wrapper">
        <div class="space-y-6">

            <!-- Pending Invitation Card -->
            <div class="dashboard-card bg-white shadow-xl rounded-xl p-6 border-t-4 border-indigo-500 fade-in">
                <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-100">
                    <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                        <i class="fa-solid fa-envelope-open-text text-indigo-500 mr-2"></i>
                        Pending Group Invitations
                    </h2>
                </div>

                <!-- Invitation Section -->
                <div id="invitation-list-container" class="min-h-[150px]">
                    <!-- Invitation list will be dynamically generated by JavaScript -->
                    <div class="text-center p-6 text-gray-500">
                        <i class="fa-solid fa-spinner fa-spin text-3xl mb-3"></i>
                        <p>Loading invitations...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Groups Card -->
        <div class="dashboard-card bg-white shadow-xl rounded-xl p-6 border-t-4 border-indigo-500 fade-in">
            <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-100">
                <h2 class="text-xl font-semibold text-gray-800 flex items-center">
                    <i class="fa-solid fa-list-check text-indigo-500 mr-2"></i>
                    My Groups
                </h2>
                <div class="flex space-x-3">
                    <button onclick="handleCreateGroup()"
                        class="flex items-center space-x-1 py-1 px-3 rounded-lg text-white bg-emerald-500 hover:bg-emerald-600 transition duration-150 text-sm shadow-md">
                        <i class="fa-solid fa-plus w-3 h-3"></i>
                        <span>Create Group</span>
                    </button>
                </div>
            </div>


            <!-- Group Section -->
            <div id="my-groups-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 min-h-[100px]">
                <!-- Group list will be dynamically generated by JavaScript -->
                <div class="col-span-full text-center p-6 text-gray-500">
                    <i class="fa-solid fa-spinner fa-spin text-3xl mb-3"></i>
                    <p>Loading groups...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div id="create-group-modal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-6 rounded-xl shadow-2xl max-w-md w-full transform transition duration-300 scale-100">
            <h3 class="text-xl font-bold mb-4 text-center">Create New Group</h3>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-medium mb-2" for="group-name">
                    Group Name
                </label>
                <input id="group-name" type="text"
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                    placeholder="Enter group name">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-medium mb-2" for="group-description">
                    Group Description
                </label>
                <textarea id="group-description"
                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 h-24 resize-none"
                    placeholder="Enter group description (optional)"></textarea>
            </div>
            <div class="flex space-x-3">
                <button onclick="closeCreateGroupModal()"
                    class="flex-1 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition duration-150">Cancel</button>
                <button onclick="createNewGroup()"
                    class="flex-1 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition duration-150">Create</button>
            </div>
        </div>
    </div>
    </div>
    </div>
</main>
{% endblock %}
<style>
    /* 管理员徽章样式 */
    .admin-badge {
        background: #FEE2E2;
        color: #DC2626;
        padding: 2px 8px;
        border-radius: 6px;
        font-size: 0.7rem;
        font-weight: 600;
        margin-left: 8px;
    }

    /* 群组卡片悬停效果 */
    .group-card {
        transition: all 0.2s ease-in-out;
        cursor: pointer;
    }

    .group-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
</style>
{% block extra_js %}
<script src="/static/js/ui/menu.js"></script>
<script type="module" src="/static/js/page/home_page.js"></script>
<script type="module" src="/static/js/api/groups.js"></script>
<script type="module" src="/static/js/api/invitations.js"></script>
{% endblock %}