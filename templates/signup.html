<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用户注册</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- 自定义主题配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'BlinkMacMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif'],
          },
          colors: {
            primary: '#4F46E5', // Indigo-600
            'primary-dark': '#4338CA', // Indigo-700
          }
        }
      }
    }
  </script>
  
  <!-- 基础样式 -->
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #F3F4F6;
      font-family: 'Inter', sans-serif;
    }
  </style>

    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' cdn.tailwindcss.com cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' cdn.tailwindcss.com cdnjs.cloudflare.com; img-src 'self' data:; connect-src 'self'">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    </head>

<body>
  <!-- 注册表单容器 -->
  <div id="signup-container" class="w-full max-w-md bg-white shadow-2xl rounded-xl p-8 md:p-10 mx-4 border border-gray-100">
    
    <!-- 头部 -->
    <div class="text-center mb-8">
      <svg class="w-12 h-12 text-primary mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
      </svg>
      <h1 class="text-3xl font-extrabold text-gray-900">创建您的账户</h1>
      <p class="mt-2 text-sm text-gray-500">快速加入我们的社区</p>
    </div>
    
    <!-- 注册表单 -->
    <form><input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
       id="signup-form">
      <!-- 用户名字段 -->
      <div class="mb-4">
        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">用户名</label>
        <input type="text" id="username" name="username" required minlength="3" maxlength="50" autocomplete="username" required
               class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
               placeholder="请输入用户名">
      </div>
      
      <!-- 邮箱字段 -->
      <div class="mb-4">
        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">电子邮箱</label>
        <input type="email" required autocomplete="email" id="email" name="email" required autocomplete="email" required
               class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
               placeholder="name@example.com">
      </div>
      
      <!-- 密码字段 -->
      <div class="mb-4">
        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">密码</label>
        <input type="password" required autocomplete="current-password" minlength="6" id="password" name="password" required minlength="6" autocomplete="new-password" required minlength="6"
               class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
               placeholder="至少6位字符">
      </div>
      
      <!-- 确认密码字段 -->
      <div class="mb-6">
        <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-1">确认密码</label>
        <input type="password" required autocomplete="current-password" minlength="6" id="confirm_password" name="confirm_password" required
               class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"
               placeholder="再次输入密码">
      </div>
      
      <!-- 消息显示区 -->
      <div id="message-box" class="hidden p-3 mb-4 rounded-lg text-sm text-center" role="alert"></div>
      
      <!-- 注册按钮 -->
      <div>
        <button type="submit" id="signup-button"
                class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-md text-base font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition duration-150 transform hover:scale-[1.01] active:scale-[0.99]">
          立即注册
        </button>
      </div>
    </form>
    
    <!-- 底部链接 -->
    <div class="mt-6 text-center text-sm">
      <p class="text-gray-600">
        已有账户？
        <a href="/login" class="font-medium text-primary hover:text-primary-dark transition duration-150">
          去登录
        </a>
      </p>
    </div>
  </div>
  
  <!-- JavaScript模块 -->
  <script type="module" src="/static/js/page/auth_page.js"></script>

    <script>
    // 全局错误处理
    window.addEventListener('error', function(e) {
        console.error('页面错误:', e.error);
        // 可以添加错误上报逻辑
    });
    
    // 网络错误处理
    window.addEventListener('unhandledrejection', function(e) {
        console.error('未处理的Promise错误:', e.reason);
    });
    
    // 表单验证增强
    document.addEventListener('DOMContentLoaded', function() {
        const forms = document.querySelectorAll('form');
        forms.forEach(form => {
            form.addEventListener('submit', function(e) {
                // 基础验证
                const requiredFields = form.querySelectorAll('[required]');
                let isValid = true;
                
                requiredFields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.classList.add('border-red-500');
                    } else {
                        field.classList.remove('border-red-500');
                    }
                });
                
                if (!isValid) {
                    e.preventDefault();
                    alert('请填写所有必填字段');
                }
            });
        });
    });
    </script>
    </body>
</html>