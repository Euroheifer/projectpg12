# è´¹ç”¨åˆ†æ‘Šç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº FastAPI å’Œç°ä»£å‰ç«¯æŠ€æœ¯çš„ç¾¤ç»„è´¹ç”¨åˆ†æ‘Šç®¡ç†å¹³å°ï¼Œç±»ä¼¼äº Splitwise çš„åŠŸèƒ½å®ç°ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ  ç¾¤ç»„ç®¡ç†** - åˆ›å»ºå’Œç®¡ç†è´¹ç”¨åˆ†æ‘Šç¾¤ç»„
- **ğŸ‘¥ æˆå‘˜ç®¡ç†** - æ·»åŠ ã€ç§»é™¤ç¾¤ç»„æˆå‘˜ï¼Œè®¾ç½®ç®¡ç†å‘˜æƒé™
- **ğŸ’° è´¹ç”¨è¿½è¸ª** - è®°å½•ç¾¤ç»„æˆå‘˜çš„èŠ±è´¹ï¼Œè‡ªåŠ¨è®¡ç®—åˆ†æ‘Š
- **ğŸ’³ æ”¯ä»˜ç®¡ç†** - è®°å½•æˆå‘˜é—´çš„è½¬è´¦å’Œæ”¯ä»˜
- **ğŸ“Š æ™ºèƒ½è®¡ç®—** - è‡ªåŠ¨è®¡ç®—æ¯ä¸ªæˆå‘˜çš„ä½™é¢å’Œåº”ä»˜æ¬¾é¡¹
- **ğŸ”„ å®šæœŸè´¹ç”¨** - æ”¯æŒæ¯æœˆã€æ¯å‘¨ç­‰å®šæœŸè´¹ç”¨è‡ªåŠ¨åˆ†æ‘Š
- **ğŸ“§ é‚€è¯·ç³»ç»Ÿ** - é€šè¿‡é‚®ç®±é‚€è¯·æ–°æˆå‘˜åŠ å…¥ç¾¤ç»„
- **ğŸ“± å“åº”å¼è®¾è®¡** - æ”¯æŒæ‰‹æœºã€å¹³æ¿ã€æ¡Œé¢è®¾å¤‡

### æŠ€æœ¯ç‰¹æ€§
- **ğŸ” JWT è®¤è¯** - å®‰å…¨çš„ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- **ğŸ“‹ å®¡è®¡æ—¥å¿—** - å®Œæ•´çš„æ“ä½œè®°å½•å’Œå˜æ›´è·Ÿè¸ª
- **ğŸ—„ï¸ å…³ç³»å‹æ•°æ®åº“** - ä½¿ç”¨ PostgreSQL å­˜å‚¨æ•°æ®
- **âš¡ ç¼“å­˜æ”¯æŒ** - Redis æä¾›é«˜é€Ÿæ•°æ®ç¼“å­˜
- **ğŸ”„ å¼‚æ­¥å¤„ç†** - FastAPI å¼‚æ­¥æ¡†æ¶æå‡æ€§èƒ½
- **ğŸ“– API æ–‡æ¡£** - è‡ªåŠ¨ç”Ÿæˆçš„ Swagger/OpenAPI æ–‡æ¡£
- **ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²** - Docker + Docker Compose ä¸€é”®éƒ¨ç½²
- **ğŸ”’ HTTPS æ”¯æŒ** - å†…ç½® SSL è¯ä¹¦ç”Ÿæˆå’Œç®¡ç†

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ
- **FastAPI** - ç°ä»£ Python Web æ¡†æ¶
- **SQLAlchemy** - Python SQL å·¥å…·åŒ…å’Œ ORM
- **PostgreSQL 15** - å…³ç³»å‹æ•°æ®åº“
- **Redis 7** - å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨
- **JWT** - JSON Web Token è®¤è¯
- **Pydantic** - æ•°æ®éªŒè¯å’Œè®¾ç½®ç®¡ç†
- **Alembic** - æ•°æ®åº“è¿ç§»å·¥å…·
- **APScheduler** - ä»»åŠ¡è°ƒåº¦å™¨

### å‰ç«¯æŠ€æœ¯æ ˆ
- **åŸç”Ÿ HTML5/CSS3/JavaScript** - ç°ä»£å‰ç«¯å¼€å‘
- **ES6+ æ¨¡å—åŒ–** - ä»£ç ç»„ç»‡å’Œæ¨¡å—åŒ–
- **å“åº”å¼è®¾è®¡** - Bootstrap 5 + è‡ªå®šä¹‰ CSS
- **Fetch API** - å¼‚æ­¥ HTTP è¯·æ±‚
- **Web Storage** - å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨
- **History API** - å•é¡µåº”ç”¨è·¯ç”±

### éƒ¨ç½²æŠ€æœ¯æ ˆ
- **Docker & Docker Compose** - å®¹å™¨åŒ–éƒ¨ç½²
- **Nginx** - åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡
- **Let's Encrypt** - SSL è¯ä¹¦ç®¡ç†
- **PostgreSQL** - ç”Ÿäº§çº§æ•°æ®åº“
- **Redis** - ç”Ÿäº§çº§ç¼“å­˜

## ğŸ“ é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ app/                     # åç«¯åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ main.py             # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ models.py           # SQLAlchemy æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ schemas.py          # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ auth.py             # JWT è®¤è¯ç³»ç»Ÿ
â”‚   â”œâ”€â”€ crud.py             # æ•°æ®åº“ CRUD æ“ä½œ
â”‚   â”œâ”€â”€ dependencies.py     # ä¾èµ–æ³¨å…¥
â”‚   â””â”€â”€ pages.py            # é¡µé¢è·¯ç”±
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ styles.css          # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ app.js              # ä¸»åº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ dashboard.html      # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”œâ”€â”€ js/                 # JavaScript æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth.js         # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ groups.js       # ç¾¤ç»„ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ expenses.js     # è´¹ç”¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ payments.js     # æ”¯ä»˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ navigation.js   # å¯¼èˆªæ¨¡å—
â”‚   â”‚   â””â”€â”€ utils.js        # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ tests/              # å‰ç«¯æµ‹è¯•
â”œâ”€â”€ deployment/             # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ docker-compose.dev.yml    # å¼€å‘ç¯å¢ƒ
â”‚   â”œâ”€â”€ nginx/nginx.dev.conf      # Nginx é…ç½®
â”‚   â”œâ”€â”€ docker/db/postgresql.dev.conf    # PostgreSQL é…ç½®
â”‚   â”œâ”€â”€ docker/redis/redis.dev.conf      # Redis é…ç½®
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ generate-ssl.sh       # SSL è¯ä¹¦ç”Ÿæˆ
â”‚       â””â”€â”€ start-dev.sh          # å¼€å‘ç¯å¢ƒå¯åŠ¨
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â”œâ”€â”€ Dockerfile             # Docker æ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ .env.example           # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore            # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- Docker >= 20.10
- Docker Compose >= 2.0
- è‡³å°‘ 4GB å¯ç”¨å†…å­˜
- ç«¯å£ 8000, 8080, 5432, 6379, 5050, 8443

### 1. å…‹éš†é¡¹ç›®
```bash
# å¦‚æœæœ‰Gitä»“åº“
git clone <repository-url>
cd project

# æˆ–è€…è§£å‹ä¸‹è½½çš„é¡¹ç›®åŒ…
tar -xzf project-complete.tar.gz
cd project
```

### 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
# ä½¿è„šæœ¬å¯æ‰§è¡Œ
chmod +x deployment/scripts/*.sh

# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
./deployment/scripts/start-dev.sh
```

### 3. è®¿é—®åº”ç”¨
- **å‰ç«¯é¡µé¢**: http://localhost:8080
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **pgAdmin**: http://localhost:5050
  - ç”¨æˆ·å: `admin@expense.local`
  - å¯†ç : `admin123`
- **Redis ç®¡ç†**: http://localhost:8081

### 4. åœæ­¢æœåŠ¡
```bash
docker-compose -f deployment/docker-compose.dev.yml down
```

## ğŸ“š API æ–‡æ¡£

å¯åŠ¨åº”ç”¨åï¼Œå¯ä»¥è®¿é—®ä»¥ä¸‹ URL æŸ¥çœ‹ API æ–‡æ¡£ï¼š

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### ä¸»è¦ API ç«¯ç‚¹

#### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- `PUT /api/auth/me` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

#### ç¾¤ç»„ç®¡ç†
- `GET /api/groups` - è·å–ç”¨æˆ·ç¾¤ç»„åˆ—è¡¨
- `POST /api/groups` - åˆ›å»ºç¾¤ç»„
- `GET /api/groups/{group_id}` - è·å–ç¾¤ç»„è¯¦æƒ…
- `PUT /api/groups/{group_id}` - æ›´æ–°ç¾¤ç»„ä¿¡æ¯
- `DELETE /api/groups/{group_id}` - åˆ é™¤ç¾¤ç»„

#### è´¹ç”¨ç®¡ç†
- `GET /api/groups/{group_id}/expenses` - è·å–ç¾¤ç»„è´¹ç”¨åˆ—è¡¨
- `POST /api/groups/{group_id}/expenses` - åˆ›å»ºè´¹ç”¨
- `GET /api/expenses/{expense_id}` - è·å–è´¹ç”¨è¯¦æƒ…
- `PUT /api/expenses/{expense_id}` - æ›´æ–°è´¹ç”¨
- `DELETE /api/expenses/{expense_id}` - åˆ é™¤è´¹ç”¨

#### æˆå‘˜ç®¡ç†
- `POST /api/groups/{group_id}/members` - æ·»åŠ æˆå‘˜
- `DELETE /api/groups/{group_id}/members/{member_id}` - ç§»é™¤æˆå‘˜
- `GET /api/groups/{group_id}/balances` - è·å–ç¾¤ç»„ä½™é¢

#### æ”¯ä»˜ç®¡ç†
- `GET /api/groups/{group_id}/payments` - è·å–æ”¯ä»˜è®°å½•
- `POST /api/groups/{group_id}/payments` - åˆ›å»ºæ”¯ä»˜è®°å½•
- `DELETE /api/payments/{payment_id}` - åˆ é™¤æ”¯ä»˜è®°å½•

#### é‚€è¯·ç³»ç»Ÿ
- `GET /api/invitations` - è·å–ç”¨æˆ·é‚€è¯·
- `POST /api/groups/{group_id}/invitations` - å‘é€é‚€è¯·
- `POST /api/invitations/{invitation_id}/accept` - æ¥å—é‚€è¯·

## ğŸ”§ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘è®¾ç½®

1. **å®‰è£… Python ä¾èµ–**
```bash
pip install -r requirements.txt
```

2. **è®¾ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®æ•°æ®åº“è¿æ¥ç­‰
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡**
```bash
# å¯åŠ¨æ•°æ®åº“å’Œç¼“å­˜
docker-compose -f deployment/docker-compose.dev.yml up postgres redis -d

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# å¯åŠ¨å‰ç«¯æœåŠ¡ (å¦‚æœéœ€è¦ç‹¬ç«‹çš„å¼€å‘æœåŠ¡å™¨)
cd frontend && python -m http.server 8080
```

### ä»£ç è§„èŒƒ

- **Python**: ä½¿ç”¨ Black æ ¼å¼åŒ–ï¼ŒFlake8 æ£€æŸ¥
- **JavaScript**: ä½¿ç”¨ ESLint æ£€æŸ¥ï¼ŒPrettier æ ¼å¼åŒ–
- **æ•°æ®åº“**: ä½¿ç”¨ Alembic è¿›è¡Œæ•°æ®åº“è¿ç§»

### æµ‹è¯•

```bash
# åç«¯æµ‹è¯•
pytest

# å‰ç«¯æµ‹è¯•
cd frontend && npm test
```

## ğŸ­ ç”Ÿäº§éƒ¨ç½²

### ä½¿ç”¨ Docker Compose
```bash
# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### ç¯å¢ƒå˜é‡é…ç½®

ç”Ÿäº§ç¯å¢ƒéœ€è¦é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š
- `DATABASE_URL` - PostgreSQL è¿æ¥å­—ç¬¦ä¸²
- `SECRET_KEY` - JWT å¯†é’¥
- `REDIS_URL` - Redis è¿æ¥å­—ç¬¦ä¸²
- `SMTP_*` - é‚®ä»¶æœåŠ¡é…ç½®

### SSL è¯ä¹¦é…ç½®

é¡¹ç›®åŒ…å«è‡ªåŠ¨ SSL è¯ä¹¦ç”Ÿæˆè„šæœ¬ï¼š
```bash
./deployment/scripts/generate-ssl.sh
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### ä¸»è¦è¡¨ç»“æ„

#### ç”¨æˆ·è¡¨ (users)
- `id` - ç”¨æˆ·ID
- `email` - é‚®ç®±åœ°å€
- `full_name` - å…¨å
- `hashed_password` - å¯†ç å“ˆå¸Œ
- `is_active` - æ˜¯å¦æ´»è·ƒ
- `created_at` - åˆ›å»ºæ—¶é—´

#### ç¾¤ç»„è¡¨ (groups)
- `id` - ç¾¤ç»„ID
- `name` - ç¾¤ç»„åç§°
- `description` - ç¾¤ç»„æè¿°
- `created_by_id` - åˆ›å»ºè€…ID
- `created_at` - åˆ›å»ºæ—¶é—´

#### è´¹ç”¨è¡¨ (expenses)
- `id` - è´¹ç”¨ID
- `group_id` - ç¾¤ç»„ID
- `payer_id` - ä»˜æ¬¾äººID
- `title` - è´¹ç”¨æ ‡é¢˜
- `amount` - è´¹ç”¨é‡‘é¢
- `expense_date` - è´¹ç”¨æ—¥æœŸ

#### è´¹ç”¨åˆ†æ‘Šè¡¨ (expense_splits)
- `id` - åˆ†æ‘ŠID
- `expense_id` - è´¹ç”¨ID
- `user_id` - ç”¨æˆ·ID
- `share_amount` - åˆ†æ‘Šé‡‘é¢
- `is_paid` - æ˜¯å¦å·²ä»˜æ¬¾

## ğŸ” å®‰å…¨ç‰¹æ€§

- **JWT è®¤è¯** - æ— çŠ¶æ€çš„ç”¨æˆ·è®¤è¯
- **å¯†ç å“ˆå¸Œ** - ä½¿ç”¨ bcrypt å®‰å…¨å­˜å‚¨å¯†ç 
- **CORS é…ç½®** - è·¨åŸŸèµ„æºå…±äº«æ§åˆ¶
- **SQL æ³¨å…¥é˜²æŠ¤** - ä½¿ç”¨ SQLAlchemy ORM
- **è¾“å…¥éªŒè¯** - Pydantic æ•°æ®éªŒè¯
- **HTTPS æ”¯æŒ** - å¼ºåˆ¶ä½¿ç”¨å®‰å…¨è¿æ¥
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

## ğŸš§ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ
A: 
```bash
docker-compose -f deployment/docker-compose.dev.yml down -v
docker-compose -f deployment/docker-compose.dev.yml up -d
```

### Q: å¦‚ä½•æŸ¥çœ‹åº”ç”¨æ—¥å¿—ï¼Ÿ
A:
```bash
docker-compose -f deployment/docker-compose.dev.yml logs -f backend
```

### Q: å¦‚ä½•ä¿®æ”¹ç«¯å£é…ç½®ï¼Ÿ
A: ç¼–è¾‘ `deployment/docker-compose.dev.yml` æ–‡ä»¶ä¸­çš„ç«¯å£æ˜ å°„ã€‚

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®åº“ï¼Ÿ
A:
```bash
docker-compose -f deployment/docker-compose.dev.yml exec postgres pg_dump -U postgres expense_dev > backup.sql
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ‘¥ ä½œè€…

- **MiniMax Agent** - *åˆå§‹å¼€å‘* - [MiniMax](https://github.com/minimax-agent)

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [SQLAlchemy](https://www.sqlalchemy.org/) - Python SQL å·¥å…·åŒ…
- [Bootstrap](https://getbootstrap.com/) - CSS æ¡†æ¶
- [Docker](https://www.docker.com/) - å®¹å™¨åŒ–å¹³å°